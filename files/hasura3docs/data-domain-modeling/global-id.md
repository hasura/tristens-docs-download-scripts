# OpenDD Global ID

## Introduction​

A Global ID is a unique identifier for an object across the entire application, not just within a specific table or
type. Think of it as an ID which you can use to fetch any object directly, regardless of what kind of object it is. This
is different from typical database IDs, which are often guaranteed unique only within a particular table.

Hasura's Global ID implementation can be used to provide options for GraphQL clients to elegantly handle caching and
data re-fetching in a predictable and standardized way.

The Global ID generated by Hasura DDN follows the[ Relay Global ID spec ](https://relay.dev/graphql/objectidentification.htm).

As the example below shows, the `user` object type has a field `user_id` that uniquely identifies a user. The Global ID
for the `user` object type will be generated using the `user_id` field:

For the following request on a model which has enabled Global ID:

```
{
   user_by_id ( user_id :   1 )   {
     id  //  Global   ID
     user_id
     name
   }
}
```

The response obtained should look like the following:

```
{
   "data" :   {
     "user_by_id" :   {
       "id" :   "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=" ,
       "user_id" :   1 ,
       "name" :   "Bob"
     }
   }
}
```

Now, with the Global ID received above, the `User` object corresponding to `user_id: 1` can be retrieved, as shown
below.

```
{
   node ( id :   "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=" )   {
     id
     __typename
     ...   on   User   {
       name
     }
   }
}
```

The response to the above request should identify the `User` with `user_id: 1` .

```
{
   "node" :   {
     "id" :   "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=" ,
     "__typename" :   "User" ,
     "name" :   "Bob"
   }
}
```

## Description​

You can configure an `ObjectType` to generate a Global ID, by extending its definition to accept the list of the fields
that will uniquely identify the object.

### Metadata structure:​

1. `objectType`


```
kind :  ObjectType
name :  <NAME >
fields :  <FIELDS >
globalIdFields :  <GlobalId >
```

1. `model`


```
kind :  Model
name :  <NAME >
dataType :  <DATATYPE >
globalIdSource :  <GlobalIDSource >
```

### Metadata fields reference:​

1. `GlobalIdFields` - `[String]` - A list of field(s) which can uniquely identify the object.
2. `GlobalIdSource` - boolean - Boolean value that indicates that this model should be used to retrieve objects using a global ID corresponding to the model's `objectType` .


 `GlobalIdFields` - `[String]` - A list of field(s) which can uniquely identify the object.

 `GlobalIdSource` - boolean - Boolean value that indicates that this model should be used to retrieve objects using a global ID corresponding to the model's `objectType` .

## Example​

Let's consider the following `article` object and let's assume the `article_id` field uniquely identifies an article:

```
kind :  ObjectType
name :  article
fields :
   -   name :  article_id
     type :  Int
   -   name :  title
     type :  String
   -   name :  author_id
     type :  Int
```

We need to add the `article_id` field in the `globalID` .

```
kind :  ObjectType
name :  article
fields :
   -   name :  article_id
     type :  Int
   -   name :  title
     type :  String
   -   name :  author_id
     type :  Int
globalIdFields :
   -  article_id
```

Next, we need to choose the model that implements the `article` object type to be the Global ID source for the object
type `article` . This can be done by adding `globalIDSource: true` in the model's definition:

```
kind :  Model
name :  Articles
objectType :  article
globalIdSource :   true
```

Consideration for id fields and multiple models

`id`

For an object type to generate a Global ID, it should not have any field named `id` , because it will be generated
automatically.

Additionally, multiple models can implement the same object type, **but only one model out of this selection can be the
Global ID source of the object type.** 

With the above changes, the following GraphQL schema will be generated:

```
interface   Node   {
   id :   ID !
}
type   Articles   implements   Node   {
   article_id :   Int !
   title :   String !
}
```

### Examples of GraphQL requests executed on the above GraphQL schema​

1. GraphQL Request to fetch `Article` by `id` that fetches the Global ID,


```
{
   article_by_id ( article_id :   1 )   {
     id  //  Global   ID
     article_id
   }
}
```

The response obtained should look like the following:

```
{
   "data" :   {
     "article_by_id" :   {
       "id" :   "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=" ,
       "article_id" :   1
     }
   }
}
```

1. GraphQL request to fetch an object using the Global ID.


```
{
   node ( id :   "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=" )   {
     id
     __typename
     ...   on   Article   {
       title
     }
   }
}
```

The response corresponding to the above request should identify the `Article` with `article_id: 1` .

```
{
   "node" :   {
     "id" :   "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=" ,
     "__typename" :   "Article" ,
     "title" :   "Article title 1"
   }
}
```

### What did you think of this doc?

- [ Introduction ](https://hasura.io/docs/3.0/data-domain-modeling/global-id/#introduction)
- [ Description ](https://hasura.io/docs/3.0/data-domain-modeling/global-id/#description)
    - [ Metadata structure: ](https://hasura.io/docs/3.0/data-domain-modeling/global-id/#metadata-structure)

- [ Metadata fields reference: ](https://hasura.io/docs/3.0/data-domain-modeling/global-id/#metadata-fields-reference)
- [ Example ](https://hasura.io/docs/3.0/data-domain-modeling/global-id/#example)
    - [ Examples of GraphQL requests executed on the above GraphQL schema ](https://hasura.io/docs/3.0/data-domain-modeling/global-id/#examples-of-graphql-requests-executed-on-the-above-graphql-schema)
